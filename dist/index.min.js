!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["js-increments"]=e():t["js-increments"]=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>s});const o=class{constructor(t){this.options={from:0,to:100,duration:5e3,wait:0,max:100,step:1,target:!1,targets:[],onStart:null,onUpdate:null,onFinish:null,...t},this.targets=[],this.options.target&&this.options.targets.push(this.options.target),this.options.targets.forEach((t=>{const e=new class{constructor(t,e){this.counterOptions=e,this.options={selector:null,property:"width",type:"text",unit:"%",percentage:!0,...t}}get update(){switch(this.options.type){case"text":return function(t){const e=this.options.percentage?100*t/this.counterOptions.max:t;this.element.textContent=`${Math.round(e).toLocaleString()}${this.options.percentage?"%":""}`};case"style":return function(t){this.element.style.setProperty(this.options.property,100*t/this.counterOptions.max+this.options.unit)}}}get element(){return document.querySelector(this.options.selector)}get valid(){if(!this.options.selector)throw new Error("SELECTOR_NOT_FOUND");if(!this.element)throw new Error("NO_DOM_ELEMENT_FOUND_FOR_THE_SELECTOR");if(!["text","style"].includes(this.options.type))throw new Error("INVALID_TARGET_TYPE");if("style"==this.options.type&&!this.options.property)throw new Error("NO_CSS_PROPERTY_PROVIDED");return!0}}(t,this.options);e.valid&&this.targets.push(e)}))}start(){if(!this.valid)return;this._destroyRelatedInstances(),this._fireEvent("onStart"),this.counter=this.options.from,this._updateElement();const t=this;setTimeout((function(){if(t.interval<10){const e=t.options.step;t.options.step=10*t.options.step/t.interval,console.warn(`step overrided from ${e} to ${t.options.step}`)}t.id=setInterval((function(){t.counter===t.options.to?t.stop():(t.options.to&&t.counter+t.options.step>t.options.to?t.counter=t.options.to:t.counter+=t.options.step,t._updateElement())}),t.interval),t._registerInstance()}),t.options.wait)}stop(){clearInterval(this.id),this._fireEvent("onFinish")}_destroyRelatedInstances(){(window.jsIncrementsInstances??[]).forEach(((t,e)=>{const o=t.targets.map((t=>t.options.selector));this.targets.some((t=>o.includes(t.options.selector)))&&(window.jsIncrementsInstances.splice(e,1),t.stop())}))}_registerInstance(){void 0===window.jsIncrementsInstances&&(window.jsIncrementsInstances=[]),window.jsIncrementsInstances.push(this)}_updateElement(){this._fireEvent("onUpdate"),this.targets.forEach((t=>{t.element?t.update(this.counter):this.stop()}))}_fireEvent(t){this.options.hasOwnProperty(t)&&"function"==typeof this.options[t]&&this.options[t](this)}get interval(){return this.options.duration/(this.options.to-this.options.from)*this.options.step}get valid(){if(["from","to","duration","wait","max","step"].forEach((t=>{if(isNaN(this.options[t]))throw new Error(t.toUpperCase()+"_IS_NAN");this.options[t]=parseInt(this.options[t])})),!this.targets.length)throw new Error("NO_VALID_TARGETS");if(this.options.to<this.options.from)throw new Error("TO_MUST_BE_GREATER_THAN_FROM");return(!this.options.max||this.options.max<this.options.to)&&(this.options.max=this.options.to),!0}};window.jsIncrements=o;const s=o;return e})()}));