class Target{constructor(t,e){this.counterOptions=e,this.options={selector:null,property:"width",type:"text",unit:"%",percentage:!0,...t}}get update(){switch(this.options.type){case"text":return function(t){t=this.options.percentage?100*t/this.counterOptions.max:t;this.element.textContent=Math.round(t)+" "+(this.options.percentage?"%":"")};case"style":return function(t){this.element.style.setProperty(this.options.property,100*t/this.counterOptions.max+this.options.unit)}}}get element(){return document.querySelector(this.options.selector)}get valid(){try{if(!this.options.selector)throw new Error("Selector not found");if(!this.element)throw new Error("No DOM element found for selector "+this.options.selector);if(!["text","style"].includes(this.options.type))throw new Error("Invalid target type"+this.options.type);if("text"==this.options.type&&this.options.percentage&&!this.counterOptions.max)throw new Error("No maximum value provided for percentage calculation");if("style"==this.options.type&&!this.options.property)throw new Error("No CSS property provided")}catch(t){return void console.error(this,t.message)}return!0}}class Counter{constructor(t){this.options={from:0,to:100,interval:50,wait:0,max:100,step:1,target:!1,targets:[],onStart:null,onUpdate:null,onFinish:null,...t},this.targets=[],this.options.target&&this.options.targets.push(this.options.target),this.options.targets.forEach(t=>{t=new Target(t,this.options);t.valid&&this.targets.push(t)})}start(){if(!this.targets.length)throw new Error("There are no valid targets");this._fireEvent("onStart"),this.counter=this.options.from,this._updateElement();const e=this;setTimeout(function(){var t=setInterval(function(){e.counter===e.options.to?(clearInterval(t),e._fireEvent("onFinish")):(e.options.to&&e.counter+e.options.step>e.options.to?e.counter=e.options.to:e.counter+=e.options.step,e._updateElement())},e.options.interval)},e.options.wait)}_updateElement(){this._fireEvent("onUpdate"),this.targets.forEach(t=>{t.update(this.counter)})}_fireEvent(t){this.options.hasOwnProperty(t)&&"function"==typeof this.options[t]&&this.options[t](this)}}window.Counter=Counter;